(self["webpackChunkdemo"]=self["webpackChunkdemo"]||[]).push([[422],{45991:function(t,a,e){var s=e(51563);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals);var i=e(69333).A;i("15deda60",s,!0,{sourceMap:!1,shadowMode:!1})},1994:function(t,a,e){"use strict";e.r(a),e.d(a,{default:function(){return m}});var s,i={uPopup:e(78706).A,uButton:e(75263).A,uModal:e(96033).A,uIcon:e(30623).A},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"purchase"},[e("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.payStatus,expression:"payStatus == '1'"}],staticClass:"help",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.$goto("/pages/common/webim")}}},[e("img",{staticClass:"w-full",attrs:{src:t.$store.state.domain+"/help.jpg",alt:"支付有问题，联系在线客服"}})]),e("div",{staticClass:"list"},t._l(t.packages,(function(a,s){return e("div",{key:a.packageId,staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleShowPay(a)}}},[a.description?e("div",{staticClass:"description"},[t._v(t._s(a.description))]):t._e(),e("div",{staticClass:"item-body"},[a.legend?e("div",{staticClass:"legend"},[t._v(t._s(a.legend))]):t._e(),e("div",{staticClass:"name"},[t._v(t._s(a.name))]),e("div",{staticClass:"price"},[t._v(t._s(a.price))]),e("div",{staticClass:"details"},[t._v(t._s(a.details))])])])})),0),e("u-popup",{attrs:{show:t.v_confirm_pay,mode:"center",round:"10"}},[e("div",{staticClass:"modal-tip"},[e("div",{staticClass:"title"},[t._v(t._s(t.$t("kind_reminder")))]),e("div",{staticClass:"sub-title"},[t._v(t._s(t.$t("logged_in_benefits")))]),e("div",{staticClass:"cells"},[e("div",{staticClass:"btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.$goto("/pages/common/login")}}},[t._v(t._s(t.$t("login")))]),e("div",{staticClass:"btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handlePurchase.apply(void 0,arguments)}}},[t._v(t._s(t.$t("purchase")))]),e("div",{staticClass:"btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.v_confirm_pay=!1}}},[t._v(t._s(t.$t("cancel")))])])])]),e("u-popup",{attrs:{show:t.v_show_pay,mode:"bottom"},on:{close:function(a){arguments[0]=a=t.$handleEvent(a),function(){t.v_show_pay=!1}.apply(void 0,arguments)}}},[e("div",{staticClass:"package-detail"},[e("div",{staticClass:"hd flex justify-between"},[e("div",[e("div",{staticClass:"font-bold"},[t._v(t._s(t.select_package.name)+" ("+t._s(t.select_package.duration)+")")]),e("div",{staticClass:"mt-20 text-12"},[t._v(t._s(t.select_package.details))])]),e("div",[t._v(t._s(t.select_package.price))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"1"==t.payStatus,expression:"payStatus == '1'"}],staticClass:"mt-40"},[e("div",{staticClass:"flex justify-between items-center",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.payType="wxpay"}}},[e("div",{staticClass:"flex items-center"},[e("img",{staticClass:"mr-10",attrs:{src:"static/wxpay.png",width:"30"}}),t._v("微信支付")]),e("div",[e("svg",{directives:[{name:"show",rawName:"v-show",value:"wxpay"==t.payType,expression:"payType == 'wxpay'"}],staticClass:"icon-1",attrs:{t:"1731550102647",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4468",width:"30",height:"30","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("path",{attrs:{d:"M512 810.667c-164.693 0-298.667-134.016-298.667-298.667s133.973-298.667 298.667-298.667c164.651 0 298.667 134.016 298.667 298.667s-134.016 298.667-298.667 298.667zM512 253.184c-142.72 0-258.859 116.096-258.859 258.816s116.139 258.816 258.859 258.816c142.763 0 258.816-116.181 258.816-258.816 0-142.763-116.053-258.816-258.816-258.816z","p-id":"4469",fill:"#333333"}}),e("path",{attrs:{d:"M682.667 512c0 94.257-76.41 170.667-170.667 170.667s-170.667-76.41-170.667-170.667c0-94.257 76.41-170.667 170.667-170.667s170.667 76.41 170.667 170.667z","p-id":"4470",fill:"#333333"}})]),e("svg",{directives:[{name:"show",rawName:"v-show",value:"alipay"==t.payType,expression:"payType == 'alipay'"}],staticClass:"icon-0",attrs:{t:"1731549868984",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4253","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"30",height:"30"}},[e("path",{attrs:{d:"M512 810.667c-164.693 0-298.667-134.016-298.667-298.667s133.973-298.667 298.667-298.667c164.651 0 298.667 134.016 298.667 298.667s-134.016 298.667-298.667 298.667zM512 253.184c-142.72 0-258.859 116.096-258.859 258.816s116.139 258.816 258.859 258.816c142.763 0 258.816-116.181 258.816-258.816 0-142.763-116.053-258.816-258.816-258.816z",fill:"#333333","p-id":"4254"}})])])]),e("div",{staticClass:"flex justify-between items-center mt-30",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.payType="alipay"}}},[e("div",{staticClass:"flex items-center"},[e("img",{staticClass:"mr-10",attrs:{src:"static/alipay.png",width:"30"}}),t._v("支付宝支付")]),e("div",[e("svg",{directives:[{name:"show",rawName:"v-show",value:"alipay"==t.payType,expression:"payType == 'alipay'"}],attrs:{t:"1731550102647",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4468",width:"30",height:"30","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[e("path",{attrs:{d:"M512 810.667c-164.693 0-298.667-134.016-298.667-298.667s133.973-298.667 298.667-298.667c164.651 0 298.667 134.016 298.667 298.667s-134.016 298.667-298.667 298.667zM512 253.184c-142.72 0-258.859 116.096-258.859 258.816s116.139 258.816 258.859 258.816c142.763 0 258.816-116.181 258.816-258.816 0-142.763-116.053-258.816-258.816-258.816z","p-id":"4469",fill:"#333333"}}),e("path",{attrs:{d:"M682.667 512c0 94.257-76.41 170.667-170.667 170.667s-170.667-76.41-170.667-170.667c0-94.257 76.41-170.667 170.667-170.667s170.667 76.41 170.667 170.667z","p-id":"4470",fill:"#333333"}})]),e("svg",{directives:[{name:"show",rawName:"v-show",value:"wxpay"==t.payType,expression:"payType == 'wxpay'"}],staticClass:"icon-0",attrs:{t:"1731549868984",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4253","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"30",height:"30"}},[e("path",{attrs:{d:"M512 810.667c-164.693 0-298.667-134.016-298.667-298.667s133.973-298.667 298.667-298.667c164.651 0 298.667 134.016 298.667 298.667s-134.016 298.667-298.667 298.667zM512 253.184c-142.72 0-258.859 116.096-258.859 258.816s116.139 258.816 258.859 258.816c142.763 0 258.816-116.181 258.816-258.816 0-142.763-116.053-258.816-258.816-258.816z",fill:"#333333","p-id":"4254"}})])])])]),e("div",{staticClass:"mt-40"},[e("u-button",{attrs:{type:"primary",loadingText:"正在请求中，请稍后",loading:t.loading},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.handlePay.apply(void 0,arguments)}}},[t._v(t._s(t.$t("pay")))])],1)])]),e("u-modal",{attrs:{show:t.v_qrcode,showCancelButton:!0,confirmText:t.$t("paid")},on:{confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.checkOrderStatus.apply(void 0,arguments)},cancel:function(a){arguments[0]=a=t.$handleEvent(a),function(){t.v_qrcode=!1}.apply(void 0,arguments)}}},[e("div",{staticClass:"modal-qrcode"},[e("div",{staticClass:"hd flex justify-between"},[e("div",[e("div",[t._v(t._s(t.select_package.name)+" ("+t._s(t.select_package.duration)+")")])]),e("div",{staticClass:"font-bold color-blue"},[t._v(t._s(t.select_package.price))])]),e("div",{staticClass:"mt-20"},[e("div",{staticClass:"wrap-alipay"},[e("img",{attrs:{src:t.url_qrcode,width:"200",height:"200"}})])]),e("div",{staticClass:"mt-20 text-align-center"},[t._v(t._s(t.$t("use"))),e("strong",{staticClass:"color-red"},[t._v(t._s("alipay"==t.payType?t.$t("alipay"):t.$t("wxpay")))]),t._v("["+t._s(t.$t("scan"))+"]")]),e("div",{directives:[{name:"show",rawName:"v-show",value:"windows"!=t.device,expression:"device != 'windows'"}],staticClass:"mt-20"},[e("div",{staticClass:"color-blue text-12"},[t._v("温馨提示:请使用"),e("span",{staticClass:"color-red"},[t._v("手机截屏")]),t._v("，将图片保存到手机后再扫描")])])])]),e("u-modal",{attrs:{show:t.v_payhelp,showCancelButton:!0,confirmText:t.$t("paid"),cancelText:t.$t("payment_issue"),cancelColor:"#d80000"},on:{confirm:function(a){arguments[0]=a=t.$handleEvent(a),t.handlePaid.apply(void 0,arguments)},cancel:function(a){arguments[0]=a=t.$handleEvent(a),t.handleHelp.apply(void 0,arguments)}}},[e("div",[e("div",{staticClass:"btn-close"},[e("u-icon",{attrs:{name:"close",color:"#fff"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.v_payhelp=!1}}})],1),e("div",{staticClass:"mt-40"},[t._v(t._s(t.$t("order_created")))])])])],1)},o=[],c=(e(60739),e(33110),e(79432),e(41283)),d=e(76987),l=e(59984),r="",p=localStorage.getItem("packages"),v=p?JSON.parse(p):[],u=null,h={data:function(){return{payType:"wxpay",v_confirm_pay:!1,packages:v,select_package:{},loading:!1,status_package:0==v.length?0:1,payStatus:"0",v_show_pay:!1,v_qrcode:!1,url_qrcode:"",v_payhelp:!1}},computed:{device:function(){return l.A.state.device||"ios"}},methods:{handleSaveImage:function(){d.A.saveImage(this.url_qrcode),uni.showToast({icon:"none",title:"图片已保存至Pictures目录"})},getData:function(){d.A.httpGet("/client/packageprice","setPackage"),d.A.httpGet("/client/getPayStatus","getPayStatusSuccess")},showPayDialog:function(t,a){this.v_payhelp=!0},handlePaid:function(){d.A.httpGet("/client/orderstatus?orderno="+r,"getOrderStatusOk"),this.v_payhelp=!1},handleHelp:function(){this.$goto("/pages/common/webim"),this.v_payhelp=!1},handleKF:function(){handleBack(),window.handleChat()},handlePay:function(){"ios"==this.device&&"0"==this.payStatus?(l.A.state.account?this.applePay():this.v_confirm_pay=!0,this.v_show_pay=!1):(this.loading=!0,d.A.httpGet("/client/getPayLink?packageId="+this.select_package.packageId+"&payType="+this.payType,"getPayLinkSuccess","getPayLinkError"))},applePay:function(){uni.showLoading({mask:!0}),u=setTimeout((function(){uni.hideLoading()}),5e3),d.A.startPay(JSON.stringify({packageId:this.select_package.packageId}))},handlePurchase:function(){this.applePay(),this.v_confirm_pay=!1},handleShowPay:function(t){this.select_package=t,this.v_show_pay=!0},checkOrderStatus:function(){this.v_qrcode=!1,d.A.httpGet("/client/orderstatus?orderno="+r,"getOrderStatusOk")}},onLoad:function(){var t=this;window.setPackage=function(a){var e=c.A.formatData(a);t.packages=e,localStorage.setItem("packages",JSON.stringify(e)),t.status_package=1},window.getPayStatusSuccess=function(a){var e=c.A.formatData(a);t.payStatus=e},window.getPayLinkSuccess=function(a){t.loading=!1;var e=c.A.formatData(a);r=e.orderNo,"windows"==t.device||"wxpay"==t.payType?(t.v_qrcode=!0,t.url_qrcode=e.url):(t.showPayDialog(e.orderNo,e.url),d.A.openUpdateUrl(JSON.stringify({update_url:e.url}))),t.v_show_pay=!1},window.getPayLinkError=function(){uni.showToast({icon:"error",title:"请求超时，请重试"}),t.loading=!1},window.getOrderStatusOk=function(a){var e=c.A.formatData(a);1==e?t.$dialog({content:t.$t("pay_success")}):t.$dialog({content:t.$t("no_paid_status")}),c.A.getUserInfo()},window.setPayStatus=function(t){clearTimeout(u),c.A.getUserInfo(),uni.hideLoading()}},onReady:function(){this.getData()}},g=h,w=(e(45991),e(18535)),f=(0,w.A)(g,n,o,!1,null,"570b36cd",null,!1,i,s),m=f.exports},51563:function(t,a,e){"use strict";e.r(a);var s=e(31601),i=e.n(s),n=e(76314),o=e.n(n),c=o()(i());c.push([t.id,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-page-body[data-v-570b36cd]{background:#f7f7f7}body.?%PAGE?%[data-v-570b36cd]{background:#f7f7f7}.purchase[data-v-570b36cd]{padding:%?1?% 0 %?40?%;height:100%;box-sizing:border-box;overflow:auto}.purchase .btn-close[data-v-570b36cd]{position:absolute;right:%?20?%;top:%?20?%;padding:%?10?%;border-radius:50%;background-color:#ddd}.purchase .help[data-v-570b36cd]{margin:%?20?% %?40?% 0;border-radius:%?20?%;overflow:hidden}.purchase .help img[data-v-570b36cd]{vertical-align:top}.purchase .list[data-v-570b36cd]{margin:%?40?% %?40?% 0;display:grid;grid-template-columns:repeat(2,1fr);gap:%?40?%}.purchase .list .item[data-v-570b36cd]{border-radius:%?20?%;cursor:pointer;border:1px solid #2686ea;text-align:center;background:#fff;box-shadow:0 0 3px #aaa;position:relative}.purchase .list .item .item-body[data-v-570b36cd]{position:relative;overflow:hidden;padding:%?40?%;border-radius:%?20?%}.purchase .list .item .legend[data-v-570b36cd]{background:#faedf4;color:red;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);font-size:%?24?%;position:absolute;left:%?-60?%;top:%?-4?%;padding:%?24?% 0 %?5?%;width:%?150?%;text-align:center}.purchase .list .item .description[data-v-570b36cd]{position:absolute;background:red;color:#fff;border-radius:%?10?%;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%);top:%?-20?%;font-size:%?24?%;white-space:nowrap;padding:%?8?% %?12?%;z-index:1}.purchase .list .item .name[data-v-570b36cd]{font-size:%?40?%;font-weight:700}.purchase .list .item .price[data-v-570b36cd]{font-size:%?36?%;color:#2686ea;margin-top:%?10?%}.purchase .list .item .details[data-v-570b36cd]{font-size:%?24?%;color:#2686ea;margin-top:%?10?%}.purchase .package-detail[data-v-570b36cd]{padding:%?40?% %?40?% %?20?%}.purchase .package-detail .hd[data-v-570b36cd]{border-bottom:1px solid #eee;padding:0 0 %?20?%}.purchase .modal-tip[data-v-570b36cd]{width:90vw}.purchase .modal-tip .title[data-v-570b36cd]{text-align:center;padding:%?20?% 0;font-size:%?36?%;font-weight:700}.purchase .modal-tip .sub-title[data-v-570b36cd]{padding:0 %?40?% %?40?%;line-height:2}.purchase .modal-tip .btn[data-v-570b36cd]{border-top:1px solid #eee;color:var(--color-blue);text-align:center;padding:%?20?% 0}.purchase .modal-qrcode[data-v-570b36cd]{width:%?600?%}.purchase .modal-qrcode .wrap-alipay[data-v-570b36cd]{position:relative;margin:0 auto;width:%?400?%;height:%?400?%}.purchase .modal-qrcode .wrap-alipay .icon[data-v-570b36cd]{position:absolute;left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:#fff}',""]),a["default"]=c}}]);